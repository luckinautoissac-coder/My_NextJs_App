# 话题管理升级 - 文件夹与搜索功能

## 功能概述

本次升级为话题管理系统添加了两大核心功能：
1. **文件夹管理** - 让您可以整理和分类话题
2. **搜索功能** - 快速查找您需要的话题

---

## 新功能介绍

### 1. 文件夹功能

#### 创建文件夹
- 点击话题区顶部的 **文件夹+** 图标
- 创建后会自动进入编辑模式，输入文件夹名称
- 按 Enter 保存，按 Esc 取消

#### 管理文件夹
- **重命名**：右键点击文件夹 → 选择"重命名"
- **删除**：右键点击文件夹 → 选择"删除文件夹"
  - 删除文件夹不会删除其中的话题
  - 话题会自动移出到根目录
- **展开/收起**：点击文件夹左侧的箭头图标

#### 文件夹排序
- 鼠标悬停在文件夹上，会显示拖拽手柄（⋮⋮）
- 按住拖拽手柄，上下移动即可调整文件夹顺序

### 2. 话题整理

#### 方式一：拖拽话题到文件夹
1. 鼠标悬停在话题上，显示拖拽手柄
2. 按住拖拽手柄
3. 将话题拖到目标文件夹上
4. 释放鼠标完成移动

#### 方式二：从文件夹移出话题
- 将文件夹内的话题拖到文件夹外的空白区域
- 话题会自动移出到根目录

#### 话题排序
- 未归档的话题可以相互拖拽调整顺序
- 同一文件夹内的话题也可以相互拖拽调整顺序
- 不同文件夹的话题无法互相拖拽

### 3. 搜索功能

#### 使用搜索
1. 在话题区顶部找到搜索框
2. 输入话题名称的关键词
3. 搜索结果会实时显示
4. 点击清除按钮（×）或清空搜索框恢复完整列表

#### 搜索特性
- **实时搜索**：输入时立即显示结果
- **智能匹配**：不区分大小写
- **结构保留**：搜索结果会保留文件夹结构
- **快速跳转**：点击搜索结果直接进入对应话题

---

## 界面说明

### 话题区顶部按钮
| 图标 | 功能 |
|------|------|
| 📁+ | 新建文件夹 |
| ➕ | 新建话题 |

### 文件夹显示
```
📂 工作项目 (5)          ← 文件夹名称（话题数量）
  ⋮⋮                    ← 拖拽手柄（鼠标悬停显示）
  ▼                     ← 展开/收起
  💬 话题1              ← 文件夹内的话题
  💬 话题2
```

---

## 使用技巧

### 1. 高效组织
- **按项目分类**：为不同项目创建文件夹
- **按时间分类**：创建"本周"、"本月"等文件夹
- **按优先级分类**：创建"重要"、"待处理"等文件夹

### 2. 快速操作
- 双击文件夹名快速重命名
- 使用搜索功能快速定位话题
- 拖拽比右键菜单更快捷

### 3. 保持整洁
- 定期将完成的话题归档到对应文件夹
- 删除不再需要的文件夹
- 使用简短明了的文件夹名称

---

## 数据迁移说明

### 如果您使用 Supabase 云端存储

1. 打开 Supabase 控制台
2. 进入 SQL Editor
3. 执行 `数据库更新-文件夹功能.sql` 文件中的 SQL 语句
4. 刷新页面即可使用新功能

### 如果您使用本地存储

- 无需任何操作
- 文件夹数据会自动存储在浏览器本地
- 现有话题会显示在根目录（未归档状态）

---

## 常见问题

### Q: 删除文件夹后，里面的话题会消失吗？
**A:** 不会！删除文件夹只会将其中的话题移到根目录，不会删除话题内容。

### Q: 可以创建子文件夹吗？
**A:** 当前版本不支持子文件夹，所有文件夹都是平级的。

### Q: 搜索会搜索话题内的消息内容吗？
**A:** 当前版本只搜索话题名称，不搜索消息内容。

### Q: 文件夹数据存储在哪里？
**A:** 
- 如果配置了 Supabase，文件夹信息存储在浏览器本地
- 话题的文件夹归属关系会同步到云端
- 切换设备时，文件夹结构需要重新创建，但话题归属会保持

### Q: 为什么我的文件夹不见了？
**A:** 
- 文件夹信息存储在浏览器本地 localStorage
- 清除浏览器数据会导致文件夹信息丢失
- 但话题的归属关系会保留在云端

---

## 快捷键（即将推出）

计划在未来版本添加：
- `Ctrl/Cmd + F` - 快速聚焦搜索框
- `Ctrl/Cmd + N` - 新建话题
- `Ctrl/Cmd + Shift + N` - 新建文件夹

---

## 反馈与建议

如果您在使用过程中遇到任何问题，或有改进建议，欢迎反馈！

---

**版本**: v1.0
**更新日期**: 2026-02-24


