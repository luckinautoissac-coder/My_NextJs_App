# 客户数据迁移指南

## 📌 重要说明

**客户的现有数据目前还在浏览器的localStorage中，VPS数据库是空的！**

需要让客户进行一次数据迁移，将浏览器中的数据转移到VPS云端。

---

## 🔄 迁移步骤（5分钟）

### 给客户的操作指南：

#### 1. 访问迁移工具页面

```
https://你的域名/admin/data-migration
```

例如：`https://your-app.vercel.app/admin/data-migration`

#### 2. 导出现有数据

1. 点击"**导出数据到本地文件**"按钮
2. 浏览器会下载一个JSON文件（例如：`chatapp-backup-2025-12-08.json`）
3. **保存这个文件**，这是重要的数据备份！

#### 3. 导入到云端数据库

1. 在同一页面，点击"**选择文件**"
2. 选择刚才下载的JSON文件
3. 等待导入完成（显示"✅ 成功导入"）
4. 点击"确定"刷新页面

#### 4. 验证数据

刷新后，所有历史消息和配置应该都还在。

---

## 📊 迁移前后对比

| 项目 | 迁移前 | 迁移后 |
|------|--------|--------|
| **存储位置** | 浏览器localStorage | VPS MySQL数据库 |
| **存储容量** | 5-10MB | 100GB |
| **数据持久性** | 清除缓存会丢失 | 永久保存 |
| **多设备同步** | ❌ 不支持 | ✅ 支持 |
| **存储限制** | 容易超限 | 几乎无限制 |

---

## ⚠️ 注意事项

### 迁移前检查清单

- [ ] 确保Vercel已配置VPS数据库环境变量
  - DB_HOST = 217.15.171.72
  - DB_USER = vercel_user
  - DB_PASSWORD = [你的密码]
  - DB_NAME = chatapp
  - DB_PORT = 3306

- [ ] 确保VPS MySQL正在运行
- [ ] 确保Vercel最新部署已成功

### 迁移后

- ✅ 客户的数据已在云端，不会再超限
- ✅ 可以清理localStorage释放浏览器空间
- ✅ 导出的JSON文件作为备份保存

---

## 🛠️ 手动数据恢复（如需要）

如果客户不小心清除了localStorage，可以：

1. 找到之前导出的JSON备份文件
2. 访问 `/admin/data-migration`
3. 选择JSON文件导入
4. 数据恢复完成

---

## 🆘 常见问题

### Q: 导入时显示"导入失败"？
**A:** 检查Vercel环境变量是否配置正确，或查看Vercel部署日志

### Q: 导入后数据没有显示？
**A:** 刷新页面，或按F12打开控制台查看错误信息

### Q: 可以多次导入吗？
**A:** 可以，但会创建重复数据。建议导入前清空数据库

### Q: 导出的JSON文件可以编辑吗？
**A:** 可以，但需要懂JSON格式。不建议手动编辑

---

## 📞 技术支持

如果迁移过程中遇到问题：

1. 检查Vercel部署日志
2. 检查浏览器F12控制台
3. 联系技术支持

---

## ✅ 完成后

迁移完成后，客户将享受：

- 🚀 无存储限制
- 💾 数据永久保存
- 🔄 多设备同步
- 📦 自动备份
- ⚡ 更快的性能

